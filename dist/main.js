(()=>{let e=[];function t(t){const n=document.querySelector(".js-todo-list"),o=document.querySelector(`[data-key='${t.id}']`);if(t.deleted)return o.remove(),void(0===e.length&&(n.innerHTML=""));const d=t.checked?"done":"",c=document.createElement("li");c.setAttribute("class",`todo-item ${d}`),c.setAttribute("data-key",t.id),c.innerHTML=`\n    <input id="${t.id}" type="checkbox"/>\n    <label for="${t.id}" class="tick js-tick"></label>\n    <span>${t.text}</span>\n    <button class="delete-todo js-delete-todo">\n    <svg><use href="#delete-icon"></use></svg>\n    </button>\n  `,o?n.replaceChild(c,o):n.append(c)}localStorage.setItem("todoItemsRef",JSON.stringify(e)),document.querySelector(".js-form").addEventListener("submit",(n=>{n.preventDefault();const o=document.querySelector(".js-todo-input"),d=o.value.trim();""!==d&&(function(n){const o={text:n,checked:!1,id:Date.now()};e.push(o),t(o)}(d),o.value="",o.focus())})),document.querySelector(".js-todo-list").addEventListener("click",(n=>{n.target.classList.contains("js-tick")&&function(n){const o=e.findIndex((e=>e.id===Number(n)));e[o].checked=!e[o].checked,t(e[o])}(n.target.parentElement.dataset.key),n.target.classList.contains("js-delete-todo")&&function(n){const o=e.findIndex((e=>e.id===Number(n))),d={deleted:!0,...e[o]};e=e.filter((e=>e.id!==Number(n))),t(d)}(n.target.parentElement.dataset.key)})),document.addEventListener("DOMContentLoaded",(()=>{const n=localStorage.getItem("todoItemsRef");n&&(e=JSON.parse(n),e.forEach((e=>{t(e)})))}))})();